import{a as J}from"./chunk-AXFFVIEE.js";import{a as k,b as H}from"./chunk-4UT6PFYX.js";import{b as T,c as D,d as R,g as W,j as q,k as L,s as z,u as B}from"./chunk-6YNLSSCZ.js";import{T as F,U as A,X as I,i as E}from"./chunk-X6SMWKVA.js";import{k as P,q as V}from"./chunk-KQATVZ4O.js";import"./chunk-4PPJG5BB.js";import{$b as f,Fb as p,Gb as o,Hb as r,Ib as b,Mb as x,Pb as _,Rb as N,Ua as a,Za as w,db as M,ec as m,ha as u,ia as g,jb as y,jc as h,kc as C,lc as S}from"./chunk-4SEB7VVV.js";import{a as v}from"./chunk-DRSDQDGF.js";function j(l,d){l&1&&(o(0,"div",12),m(1," Name is required "),r())}function G(l,d){l&1&&(o(0,"div",12),m(1," Category is required "),r())}function Q(l,d){if(l&1&&b(0,"pdf-viewer",13),l&2){let i=N();p("src",i.pdfSrc)("render-text",!0)("show-all",!0)("original-size",!0)}}var s=class s{constructor(d){this.router=d;this.procedimiento={id:0,name:"",category:"",user:"Jarvi Ruiz",modificationDate:new Date().toLocaleDateString("es-MX"),content:""};this.pdfSrc=null}guardar(d){if(d.invalid||!this.pdfSrc)return;this.procedimiento.content=this.pdfSrc;let i=localStorage.getItem("demo_procedimientos"),e=i?JSON.parse(i):[];this.procedimiento.id=e.length>0?Math.max(...e.map(n=>n.id))+1:1,e.push(v({},this.procedimiento)),localStorage.setItem("demo_procedimientos",JSON.stringify(e)),console.log("Procedimiento guardado:",this.procedimiento),this.router.navigate(["/procedure"])}onFileSelected(d){let i=d.target.files?.[0];if(i){let e=new FileReader;e.onload=()=>{let n=e.result;this.pdfSrc=n},e.readAsDataURL(i)}}};s.\u0275fac=function(i){return new(i||s)(w(E))},s.\u0275cmp=M({type:s,selectors:[["app-procedure-add"]],decls:23,vars:6,consts:[["procedureForm","ngForm"],["name","ngModel"],["category","ngModel"],[3,"ngSubmit"],[1,"mb-3"],[1,"form-label"],["type","text","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","text-danger small",4,"ngIf"],["type","text","name","category","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","file","accept","application/pdf",3,"change"],["style","height: 500px; display: block;",3,"src","render-text","show-all","original-size",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-danger","small"],[2,"height","500px","display","block",3,"src","render-text","show-all","original-size"]],template:function(i,e){if(i&1){let n=x();o(0,"c-card")(1,"c-card-header")(2,"strong"),m(3,"Add new procedure"),r()(),o(4,"c-card-body")(5,"form",3,0),_("ngSubmit",function(){u(n);let t=f(6);return g(e.guardar(t))}),o(7,"div",4)(8,"label",5),m(9,"Name"),r(),o(10,"input",6,1),S("ngModelChange",function(t){return u(n),C(e.procedimiento.name,t)||(e.procedimiento.name=t),g(t)}),r(),y(12,j,2,0,"div",7),r(),o(13,"div",4)(14,"label",5),m(15,"Category"),r(),o(16,"input",8,2),S("ngModelChange",function(t){return u(n),C(e.procedimiento.category,t)||(e.procedimiento.category=t),g(t)}),r(),y(18,G,2,0,"div",7),r(),o(19,"input",9),_("change",function(t){return u(n),g(e.onFileSelected(t))}),r(),y(20,Q,1,4,"pdf-viewer",10),o(21,"button",11),m(22," Save "),r()()()()}if(i&2){let n=f(6),c=f(11),t=f(17);a(10),h("ngModel",e.procedimiento.name),a(2),p("ngIf",c.invalid&&c.touched),a(4),h("ngModel",e.procedimiento.category),a(2),p("ngIf",t.invalid&&t.touched),a(2),p("ngIf",e.pdfSrc),a(),p("disabled",n.invalid)}},dependencies:[V,P,B,L,T,D,R,z,q,W,F,I,A,J,H,k],encapsulation:2});var O=s;export{O as ProcedureAddComponent};
