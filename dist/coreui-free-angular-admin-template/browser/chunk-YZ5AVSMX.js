import{a as H}from"./chunk-M3TV3ZPV.js";import{b as A,c as L,d as O,g as R,j as q,k as B,p as D,q as x,r as j,s as z,u as G}from"./chunk-6YNLSSCZ.js";import{T as I,U as P,X as T,i as F}from"./chunk-X6SMWKVA.js";import{k as W,q as U}from"./chunk-KQATVZ4O.js";import"./chunk-4PPJG5BB.js";import{$b as v,Fb as S,Gb as i,Hb as n,Ib as b,Mb as V,Pb as _,Ra as h,Rb as N,Ua as l,Za as w,db as M,ec as a,ha as d,ia as u,jb as E,jc as p,kc as g,lc as f}from"./chunk-4SEB7VVV.js";import{a as y}from"./chunk-DRSDQDGF.js";function k(C,s){if(C&1&&(i(0,"div",13),b(1,"img",14),n()),C&2){let r=N();l(),S("src",r.imagePreview,h)}}var c=class c{constructor(s,r){this.router=s;this.staffService=r;this.user={id:0,name:"",position:"",role:"",email:"",password:"",avatar:""};this.imagePreview=null}ngOnInit(){this.staffService.getStaff().subscribe(s=>{s?(this.user=y({},s),this.imagePreview=this.user.avatar):this.router.navigate(["/staff"])})}onFileSelected(s){let r=s.target.files?.[0];if(r){let e=new FileReader;e.onload=()=>{this.imagePreview=e.result,this.user.avatar=this.imagePreview},e.readAsDataURL(r)}}guardar(s){if(s.invalid)return;let r=localStorage.getItem("demo_staff"),e=r?JSON.parse(r):[],o=e.findIndex(m=>m.id===this.user.id);o!==-1&&(e[o]=this.user,localStorage.setItem("demo_staff",JSON.stringify(e))),console.log("Usuario actualizado:",this.user),this.router.navigate(["/staff"])}};c.\u0275fac=function(r){return new(r||c)(w(F),w(H))},c.\u0275cmp=M({type:c,selectors:[["app-edit-user"]],decls:38,vars:7,consts:[["userForm","ngForm"],[3,"ngSubmit"],[1,"mb-3"],["type","text","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","position","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","role","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","Admin"],["value","User"],["type","email","name","email","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","password","name","password","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","file","accept","image/*",1,"form-control",3,"change"],["class","mt-2",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"mt-2"],["alt","Avatar preview",1,"img-thumbnail",2,"max-height","120px",3,"src"]],template:function(r,e){if(r&1){let o=V();i(0,"c-card")(1,"c-card-header")(2,"strong"),a(3,"Editar usuario"),n()(),i(4,"c-card-body")(5,"form",1,0),_("ngSubmit",function(){d(o);let t=v(6);return u(e.guardar(t))}),i(7,"div",2)(8,"label"),a(9,"Nombre"),n(),i(10,"input",3),f("ngModelChange",function(t){return d(o),g(e.user.name,t)||(e.user.name=t),u(t)}),n()(),i(11,"div",2)(12,"label"),a(13,"Puesto"),n(),i(14,"input",4),f("ngModelChange",function(t){return d(o),g(e.user.position,t)||(e.user.position=t),u(t)}),n()(),i(15,"div",2)(16,"label"),a(17,"Rol"),n(),i(18,"select",5),f("ngModelChange",function(t){return d(o),g(e.user.role,t)||(e.user.role=t),u(t)}),i(19,"option",6),a(20,"Admin"),n(),i(21,"option",7),a(22,"User"),n()()(),i(23,"div",2)(24,"label"),a(25,"Correo"),n(),i(26,"input",8),f("ngModelChange",function(t){return d(o),g(e.user.email,t)||(e.user.email=t),u(t)}),n()(),i(27,"div",2)(28,"label"),a(29,"Contrase\xF1a"),n(),i(30,"input",9),f("ngModelChange",function(t){return d(o),g(e.user.password,t)||(e.user.password=t),u(t)}),n()(),i(31,"div",2)(32,"label"),a(33,"Avatar"),n(),i(34,"input",10),_("change",function(t){return d(o),u(e.onFileSelected(t))}),n(),E(35,k,2,1,"div",11),n(),i(36,"button",12),a(37," Guardar cambios "),n()()()()}if(r&2){let o=v(6);l(10),p("ngModel",e.user.name),l(4),p("ngModel",e.user.position),l(4),p("ngModel",e.user.role),l(8),p("ngModel",e.user.email),l(4),p("ngModel",e.user.password),l(5),S("ngIf",e.imagePreview),l(),S("disabled",o.invalid)}},dependencies:[U,W,G,B,x,j,A,D,L,O,z,q,R,I,T,P],encapsulation:2});var J=c;export{J as EditUserComponent};
