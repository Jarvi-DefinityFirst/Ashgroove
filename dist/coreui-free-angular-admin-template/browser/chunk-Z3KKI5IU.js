import{a as B}from"./chunk-2HMVLMMD.js";import{b as N,c as T,j as R,u as J}from"./chunk-6YNLSSCZ.js";import{T as O,U as D,X as V,i as I,u as M}from"./chunk-X6SMWKVA.js";import{j as F,q as k}from"./chunk-KQATVZ4O.js";import"./chunk-4PPJG5BB.js";import{Fb as P,Gb as i,Hb as n,Ib as h,Mb as b,Pb as l,Rb as f,Ua as m,Za as g,db as S,ec as o,fc as u,ha as s,ia as p,ja as _,jb as y,jc as x,ka as C,kc as E,lc as w}from"./chunk-4SEB7VVV.js";import"./chunk-DRSDQDGF.js";function z(v,e){if(v&1){let t=b();i(0,"tr",7),l("click",function(){let c=s(t).$implicit,a=f();return p(a.verDetalle(c))}),i(1,"td"),o(2),n(),i(3,"td"),o(4),n(),i(5,"td"),o(6),n(),i(7,"td"),o(8),n(),i(9,"td",8),l("click",function(c){return s(t),p(c.stopPropagation())}),i(10,"div",9)(11,"button",10),l("click",function(){let c=s(t).$implicit,a=f();return p(a.editarProcedimiento(c))}),_(),h(12,"svg",11),n(),C(),i(13,"button",12),l("click",function(){let c=s(t).$implicit,a=f();return p(a.eliminarProcedimiento(c))}),_(),h(14,"svg",13),n()()()()}if(v&2){let t=e.$implicit;m(2),u(t.name),m(2),u(t.category),m(2),u(t.user),m(2),u(t.modificationDate)}}var d=class d{constructor(e,t){this.router=e;this.procedureService=t;this.procedimientos=[];this.procedimientosFiltrados=[];this.nameFilter=""}ngOnInit(){let e=localStorage.getItem("demo_procedimientos");e?this.procedimientos=JSON.parse(e):(this.procedimientos=[{id:1,name:"Spotter Safety",category:"Operation",user:"Jarvi Ruiz",modificationDate:"16/06/2025",content:"Content"},{id:2,name:"Lightning",category:"Ilumination",user:"Jarvi Ruiz",modificationDate:"16/06/2025",content:"Content"},{id:3,name:"Other example",category:"Example",user:"Jarvi Ruiz",modificationDate:"16/06/2025",content:"Content"}],localStorage.setItem("demo_procedimientos",JSON.stringify(this.procedimientos))),this.procedimientosFiltrados=this.procedimientos}filtrar(){try{let e=new RegExp(this.nameFilter,"i");this.procedimientosFiltrados=this.procedimientos.filter(t=>e.test(t.name))}catch{this.procedimientosFiltrados=this.procedimientos}}agregarProcedimiento(){this.router.navigate(["/procedure/agregar"])}editarProcedimiento(e){this.procedureService.setProcedimiento(e),this.router.navigate(["/procedure/editar",e.id])}eliminarProcedimiento(e){confirm(`\xBFEst\xE1s seguro de eliminar el procedimiento "${e.name}"?`)&&(this.procedimientos=this.procedimientos.filter(r=>r.id!==e.id),this.procedimientosFiltrados=this.procedimientos,this.nameFilter="",localStorage.setItem("demo_procedimientos",JSON.stringify(this.procedimientos)),console.log("Procedimiento eliminado:",e))}verDetalle(e){this.procedureService.setProcedimiento(e),this.router.navigate(["/procedure/detalle",e.id])}};d.\u0275fac=function(t){return new(t||d)(g(I),g(B))},d.\u0275cmp=S({type:d,selectors:[["app-procedure"]],decls:24,vars:2,consts:[[1,"d-flex","justify-content-between","align-items-center"],["title","Crear nuevo",1,"btn","btn-primary","btn-sm",3,"click"],[1,"mb-3"],["type","text","placeholder","Buscar procedimiento...","name","filtro",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"table","table-striped","table-hover"],[2,"width","80px"],["class","hover-row",3,"click",4,"ngFor","ngForOf"],[1,"hover-row",3,"click"],[3,"click"],[1,"d-flex","gap-2"],["title","Editar",1,"btn","btn-sm","btn-outline-secondary",3,"click"],["cIcon","","name","cil-pencil"],["title","Eliminar",1,"btn","btn-sm","btn-outline-danger",3,"click"],["cIcon","","name","cil-trash"]],template:function(t,r){t&1&&(i(0,"c-card")(1,"c-card-header",0)(2,"strong"),o(3,"PROCEDURES"),n(),i(4,"button",1),l("click",function(){return r.agregarProcedimiento()}),o(5," Add New "),n()(),i(6,"c-card-body")(7,"div",2)(8,"input",3),w("ngModelChange",function(a){return E(r.nameFilter,a)||(r.nameFilter=a),a}),l("input",function(){return r.filtrar()}),n()(),i(9,"table",4)(10,"thead")(11,"tr")(12,"th"),o(13,"Name"),n(),i(14,"th"),o(15,"Procedure"),n(),i(16,"th"),o(17,"Created By"),n(),i(18,"th"),o(19,"Modification date"),n(),i(20,"th",5),o(21,"Actions"),n()()(),i(22,"tbody"),y(23,z,15,4,"tr",6),n()()()()),t&2&&(m(8),x("ngModel",r.nameFilter),m(15),P("ngForOf",r.procedimientosFiltrados))},dependencies:[O,V,D,k,F,J,N,T,R,M],styles:["table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background-color:#f1f3f5;cursor:pointer}"]});var j=d;export{j as ProcedureComponent};
