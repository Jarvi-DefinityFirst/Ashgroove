import{b as T,c as I,d as L,g as R,j as q,k as B,p as D,q as x,r as O,s as G,u as H}from"./chunk-6YNLSSCZ.js";import{T as U,U as P,X as F,i as W}from"./chunk-X6SMWKVA.js";import{k as A,q as N}from"./chunk-KQATVZ4O.js";import"./chunk-4PPJG5BB.js";import{$b as C,Fb as w,Gb as i,Hb as n,Ib as b,Mb as E,Pb as _,Ra as v,Rb as V,Ua as l,Za as y,db as M,ec as r,ha as s,ia as d,jb as h,jc as p,kc as g,lc as c}from"./chunk-4SEB7VVV.js";import"./chunk-DRSDQDGF.js";function j(S,m){if(S&1&&(i(0,"div",2)(1,"label"),r(2,"Vista previa:"),n(),b(3,"br")(4,"img",14),n()),S&2){let o=V();l(4),w("src",o.avatarPreview,v)}}var f=class f{constructor(m){this.router=m;this.user={id:0,name:"",position:"",role:"",email:"",password:"",avatar:""};this.avatarPreview=null}guardar(m){if(m.invalid)return;let o=localStorage.getItem("demo_staff"),e=o?JSON.parse(o):[];this.user.id=Date.now(),e.push(this.user),localStorage.setItem("demo_staff",JSON.stringify(e)),this.router.navigate(["/staff"])}onAvatarSelected(m){let o=m.target.files?.[0];if(o){let e=new FileReader;e.onload=()=>{this.avatarPreview=e.result,this.user.avatar=this.avatarPreview},e.readAsDataURL(o)}}};f.\u0275fac=function(o){return new(o||f)(y(W))},f.\u0275cmp=M({type:f,selectors:[["app-add-user"]],decls:40,vars:7,consts:[["userForm","ngForm"],[3,"ngSubmit"],[1,"mb-3"],["type","text","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","position","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","role","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],["value","Admin"],["value","User"],["type","email","name","email","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","password","name","password","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","file","accept","image/*",1,"form-control",3,"change"],["class","mb-3",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"img-thumbnail",2,"max-width","150px",3,"src"]],template:function(o,e){if(o&1){let a=E();i(0,"c-card")(1,"c-card-header")(2,"strong"),r(3,"Agregar nuevo usuario"),n()(),i(4,"c-card-body")(5,"form",1,0),_("ngSubmit",function(){s(a);let t=C(6);return d(e.guardar(t))}),i(7,"div",2)(8,"label"),r(9,"Nombre"),n(),i(10,"input",3),c("ngModelChange",function(t){return s(a),g(e.user.name,t)||(e.user.name=t),d(t)}),n()(),i(11,"div",2)(12,"label"),r(13,"Puesto"),n(),i(14,"input",4),c("ngModelChange",function(t){return s(a),g(e.user.position,t)||(e.user.position=t),d(t)}),n()(),i(15,"div",2)(16,"label"),r(17,"Rol"),n(),i(18,"select",5),c("ngModelChange",function(t){return s(a),g(e.user.role,t)||(e.user.role=t),d(t)}),i(19,"option",6),r(20,"Selecciona un rol"),n(),i(21,"option",7),r(22,"Admin"),n(),i(23,"option",8),r(24,"User"),n()()(),i(25,"div",2)(26,"label"),r(27,"Email"),n(),i(28,"input",9),c("ngModelChange",function(t){return s(a),g(e.user.email,t)||(e.user.email=t),d(t)}),n()(),i(29,"div",2)(30,"label"),r(31,"Contrase\xF1a"),n(),i(32,"input",10),c("ngModelChange",function(t){return s(a),g(e.user.password,t)||(e.user.password=t),d(t)}),n()(),i(33,"div",2)(34,"label"),r(35,"Avatar"),n(),i(36,"input",11),_("change",function(t){return s(a),d(e.onAvatarSelected(t))}),n()(),h(37,j,5,1,"div",12),i(38,"button",13),r(39,"Guardar"),n()()()()}if(o&2){let a=C(6);l(10),p("ngModel",e.user.name),l(4),p("ngModel",e.user.position),l(4),p("ngModel",e.user.role),l(10),p("ngModel",e.user.email),l(4),p("ngModel",e.user.password),l(5),w("ngIf",e.avatarPreview),l(),w("disabled",a.invalid)}},dependencies:[N,A,H,B,x,O,T,D,I,L,G,q,R,U,F,P],encapsulation:2});var J=f;export{J as AddUserComponent};
